<ion-header>

  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title> Meu Perfil </ion-title>

    <ion-buttons end>
      <button ion-button icon-only (click)="canEdit= !canEdit">
        <ion-icon name="create"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>


</ion-header>
<ion-content padding="true">
  <user-info [isMenu]="false" [user]="currentUser"></user-info>

  <form *ngIf="canEdit" #profileForm="ngForm">
    <ion-item>
      <ion-label floating> Nome</ion-label>
      <ion-input type="text" name="name" [(ngModel)]="currentUser.name" required minlenght="3" required="true">
      </ion-input>
    </ion-item>
    <br>
    <ion-item>
      <ion-label floating> Username</ion-label>
      <ion-input type="text"  disabled="true" name="username" [(ngModel)]="currentUser.email" required="true"
        minlenght="3">
      </ion-input>
    </ion-item>
    <br>
    <ion-item>
      <ion-label floating> Telefone</ion-label>
      <ion-input type="tel"  name="telefone" [(ngModel)]="currentUser.telefone" required="true" maxlength="15"
        pattern="\([0-9]{2}\) [0-9]{4,6}-[0-9]{3,4}$">
      </ion-input>
    </ion-item>
    <br>
    <ion-label> Você está em:</ion-label>
    <ion-item>
      <ion-label floating> CEP</ion-label>
      <ion-input (ionBlur)="buscarCep($event)" name="cep" type="text" [(ngModel)]="currentUser.cep" required="true">
      </ion-input>
    </ion-item>
    <br>
    <ion-item>
      <ion-label floating> Cidade</ion-label>
      <ion-input  [(ngModel)]="currentUser.cidade" name="cidade" readonly="false" type="text" required="true">
      </ion-input>
    </ion-item>
    <!-- <progress-bar *ngIf="uploadProgress" [progress]="uploadProgress"></progress-bar> -->
    <br>
    <button ion-button block  (click)="onSubmit($event)" [disabled]="!profileForm.form.invalid"> Salvar</button>
  </form>

  <button ion-button block *ngIf="!canEdit" (click)="onMeusAnuncios()"> Meus Anúncios</button>

</ion-content>